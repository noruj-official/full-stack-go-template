{{define "navbar"}}
<header class="sticky top-0 z-40 bg-base-100/80 backdrop-blur-xl border-b border-base-200">
    <div class="px-4 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Mobile menu button -->
            <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden btn btn-ghost p-2">
                <i data-lucide="menu" class="w-5 h-5"></i>
            </button>

            <!-- Search (optional) -->
            <div class="hidden sm:flex flex-1 max-w-md mx-4">
                <div class="relative w-full">
                    <i data-lucide="search"
                        class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-base-content/50"></i>
                    <input type="search" placeholder="Search..." class="input pl-10">
                </div>
            </div>

            <!-- Right side actions -->
            <div class="flex items-center gap-2">
                <!-- Dark mode toggle -->
                <button @click="darkMode = !darkMode" class="btn btn-ghost p-2"
                    :title="darkMode ? 'Switch to light mode' : 'Switch to dark mode'">
                    <i x-show="!darkMode" data-lucide="moon" class="w-5 h-5"></i>
                    <i x-show="darkMode" data-lucide="sun" class="w-5 h-5" x-cloak></i>
                </button>

                {{if .User}}
                <!-- Notifications (authenticated) -->
                <button class="btn btn-ghost p-2 relative">
                    <i data-lucide="bell" class="w-5 h-5"></i>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </button>

                <!-- User menu (authenticated) -->
                <div x-data="{ open: false }" class="relative">
                    <button @click="open = !open"
                        class="flex items-center gap-2 p-1.5 rounded-xl hover:bg-base-200 transition-colors">
                        <div
                            class="w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-sm font-medium">
                            {{slice .User.Name 0 1}}
                        </div>
                        <span class="hidden sm:block text-sm font-medium text-base-content">{{.User.Name}}</span>
                        <i data-lucide="chevron-down" class="w-4 h-4 text-base-content/50 hidden sm:block"></i>
                    </button>

                    <div x-show="open" x-transition:enter="transition ease-out duration-200"
                        x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-150"
                        x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95"
                        @click.away="open = false"
                        class="absolute right-0 mt-2 w-56 bg-base-100 border border-base-200 shadow-xl rounded-box z-50"
                        x-cloak>

                        <!-- User info header -->
                        <div class="px-4 py-2 border-b border-base-200">
                            <p class="text-sm font-medium text-base-content">{{.User.Name}}</p>
                            <p class="text-xs text-base-content/70">{{.User.Email}}</p>
                            <span class="inline-flex items-center mt-1 px-2 py-0.5 rounded text-xs font-medium 
                                {{if eq .User.Role.String " super_admin"}}badge badge-primary{{else if eq
                                .User.Role.String "admin" }}badge badge-secondary{{else}}badge badge-ghost{{end}}">
                                {{.User.Role}}
                            </span>
                        </div>

                        <a href="#"
                            class="flex items-center gap-3 px-4 py-2 text-sm text-base-content hover:bg-base-200">
                            <i data-lucide="user" class="w-4 h-4"></i>
                            Profile
                        </a>
                        <a href="#"
                            class="flex items-center gap-3 px-4 py-2 text-sm text-base-content hover:bg-base-200">
                            <i data-lucide="settings" class="w-4 h-4"></i>
                            Settings
                        </a>
                        <hr class="my-2 border-base-200">
                        <form action="/logout" method="POST">
                            <button type="submit"
                                class="w-full flex items-center gap-3 px-4 py-2 text-sm text-error hover:bg-error/10">
                                <i data-lucide="log-out" class="w-4 h-4"></i>
                                Logout
                            </button>
                        </form>
                    </div>
                </div>
                {{else}}
                <!-- Auth buttons (not authenticated) -->
                <a href="/login" class="btn btn-ghost text-sm">
                    Sign in
                </a>
                <a href="/signup" class="btn btn-primary text-sm">
                    Sign up
                </a>
                {{end}}
            </div>
        </div>
    </div>
</header>
{{end}}