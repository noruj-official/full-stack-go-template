{{define "navbar"}}
<header class="fixed top-0 left-0 right-0 z-50 bg-base-100/80 backdrop-blur-xl border-b border-base-200">
    <div class="w-full px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            <!-- Mobile menu button -->
            <label for="my-drawer-4" class="lg:hidden btn btn-ghost p-2 drawer-button">
                <i data-lucide="menu" class="w-5 h-5"></i>
            </label>

            <!-- Brand Logo/Title -->
            <a href="/" class="flex items-center gap-2 px-2">
                <span class="text-xl font-bold text-base-content">Full Stack Go Template</span>
            </a>

            <!-- Right side actions -->
            <div class="flex items-center gap-2">
                <!-- Dark mode toggle -->
                <button @click="darkMode = !darkMode" class="btn btn-ghost p-2"
                    :title="darkMode ? 'Switch to light mode' : 'Switch to dark mode'">
                    <i x-show="!darkMode" data-lucide="moon" class="w-5 h-5"></i>
                    <i x-show="darkMode" data-lucide="sun" class="w-5 h-5" x-cloak></i>
                </button>

                {{if .User}}
                <!-- User menu (authenticated) -->
                <div class="dropdown dropdown-end" x-data="{ open: false }" :class="{ 'dropdown-open': open }">
                    <button @click="open = !open" @click.away="open = false"
                        class="flex items-center gap-2 p-1.5 rounded-xl hover:bg-base-200 transition-colors">
                        <div
                            class="w-8 h-8 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-sm font-medium">
                            {{slice .User.Name 0 1}}
                        </div>
                        <span class="hidden sm:block text-sm font-medium text-base-content">{{.User.Name}}</span>
                        <i data-lucide="chevron-down" class="w-4 h-4 text-base-content/50 hidden sm:block"></i>
                    </button>

                    <ul x-show="open" x-transition:enter="transition ease-out duration-200"
                        x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-150"
                        x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95"
                        class="menu dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-56 border border-base-200">

                        <li class="menu-title px-4 py-2 border-b border-base-200 mb-2">
                            <span class="text-base-content block text-sm font-medium">{{.User.Name}}</span>
                            <span class="text-base-content/70 block text-xs font-normal">{{.User.Email}}</span>
                            <span class="inline-flex items-center mt-1 px-2 py-0.5 rounded text-xs font-medium 
                                {{if eq .User.Role.String " super_admin"}}badge badge-primary{{else if eq
                                .User.Role.String "admin" }}badge badge-secondary{{else}}badge badge-ghost{{end}}">
                                {{.User.Role}}
                            </span>
                        </li>

                        <li>
                            <a href="#">
                                <i data-lucide="user" class="w-4 h-4"></i>
                                Profile
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i data-lucide="settings" class="w-4 h-4"></i>
                                Settings
                            </a>
                        </li>
                        <div class="divider my-1"></div>
                        <li>
                            <form action="/logout" method="POST" class="w-full">
                                <button type="submit"
                                    class="w-full flex items-center gap-3 text-error hover:bg-error/10">
                                    <i data-lucide="log-out" class="w-4 h-4"></i>
                                    Logout
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
                {{else}}
                <!-- Auth buttons (not authenticated) -->
                <a href="/signin" class="btn btn-ghost text-sm">
                    Sign in
                </a>
                <a href="/signup" class="btn btn-primary text-sm">
                    Sign up
                </a>
                {{end}}
            </div>
        </div>
    </div>
</header>
{{end}}